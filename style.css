:root{
  --bg:#f5f7fb; --card:#fff; --text:#0f1419; --muted:#536471;
  --line:#e6ecf0; --primary:#1d9bf0; --primary-ghost:#e8f3ff;
  --danger:#f4212e; --ok:#17bf63; --shadow:0 12px 30px rgba(15,20,25,.06);
  --r-lg:20px; --r:16px; --r-sm:10px;
}

*{box-sizing:border-box} html,body{height:100%}
body{margin:0;font:16px/1.5 ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"PingFang SC","Microsoft Yahei",sans-serif;background:var(--bg);color:var(--text)}
a{color:var(--primary);text-decoration:none} a:hover{text-decoration:underline}

.btn{border:1px solid transparent;background:#0f1419;color:#fff;padding:.58rem .9rem;border-radius:999px;cursor:pointer}
.btn.primary{background:var(--primary)}
.btn.ghost{background:#fff;border-color:var(--line);color:#0f1419}
.btn.tiny{padding:.3rem .6rem;font-size:.85rem}
.btn:disabled{opacity:.6;cursor:not-allowed}
.spacer{flex:1}

.topbar{position:sticky;top:0;z-index:20;background:rgba(255,255,255,.7);backdrop-filter:saturate(180%) blur(10px);border-bottom:1px solid var(--line)}
.topbar-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:16px;padding:10px 12px}
.brand{font-weight:800;font-size:20px}
.search input{width:min(520px,36vw);min-width:180px;padding:.55rem .9rem;border:1px solid var(--line);border-radius:999px;background:#fff}

.layout{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:260px minmax(0,1fr) 320px;gap:18px;padding:14px}
.leftnav{display:flex;flex-direction:column;gap:6px;position:sticky;top:64px;height:calc(100vh - 64px)}
.nav-btn{all:unset;display:block;padding:.7rem 1rem;border-radius:999px;cursor:pointer}
.nav-btn:hover{background:var(--primary-ghost)}

.center{display:flex;flex-direction:column;gap:12px}
.tabs{display:flex;gap:8px;padding:6px 12px;border-bottom:1px solid var(--line);background:var(--card);border-radius:var(--r)}
.tab{all:unset;cursor:pointer;padding:.6rem 1rem;border-bottom:2px solid transparent;color:#536471}
.tab.active{color:var(--text);border-color:var(--primary);font-weight:700}

.card{background:var(--card);border:1px solid var(--line);border-radius:var(--r);box-shadow:var(--shadow)}
.composer{display:flex;gap:12px;padding:12px}
.composer textarea{width:100%;resize:vertical;border:1px solid var(--line);border-radius:12px;padding:.6rem .8rem;background:#fff}
.composer-tools{display:flex;align-items:center;gap:8px;margin-top:6px}
.media-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;margin-top:6px}
.media-grid img{width:100%;height:110px;object-fit:cover;border-radius:12px;border:1px solid var(--line);cursor:zoom-in}

.post{display:grid;grid-template-columns:48px 1fr;gap:10px;padding:14px;border-bottom:1px solid var(--line);background:#fff}
.post:first-child{border-top-left-radius:var(--r);border-top-right-radius:var(--r)}
.post:last-child{border-bottom-left-radius:var(--r);border-bottom-right-radius:var(--r)}
.post .avatar{cursor:pointer}
.post .meta{display:flex;align-items:center;gap:6px}
.post .nick{font-weight:700}
.post .time{color:var(--muted);font-size:.92rem}
.text{white-space:pre-wrap}
.post .media img{width:100%;border-radius:14px;border:1px solid var(--line);margin-top:6px;cursor:zoom-in}
.actions{display:flex;gap:16px;margin-top:6px;color:#536471}
.actions .act{all:unset;padding:.2rem .45rem;border-radius:999px;cursor:pointer}
.actions .act:hover{background:#f1f5f9}
.actions .like.active{color:var(--danger)}

.thread-head{padding:8px 14px;color:#536471;border-top:1px solid var(--line);background:#fafcff;border-bottom:1px solid var(--line)}
.thread-item{display:grid;grid-template-columns:36px 1fr;gap:8px;padding:10px 14px;border-bottom:1px dashed var(--line)}
.reply-item{display:grid;grid-template-columns:36px 1fr;gap:8px;padding:10px 14px;border-bottom:1px dashed var(--line)}

.rightcol{display:flex;flex-direction:column;gap:12px;position:sticky;top:64px;height:calc(100vh - 64px)}
.card-title{font-weight:700;padding:12px 14px;border-bottom:1px solid var(--line)}
.chips{display:flex;flex-wrap:wrap;gap:8px;padding:12px}
.chip{padding:.35rem .7rem;border:1px solid var(--line);border-radius:999px;background:#fff;color:#374151}

.loadmore{display:flex;justify-content:center}
.footer{padding:36px 12px;color:#8a99a8;text-align:center}

.avatar{width:48px;height:48px;border-radius:50%;object-fit:cover}
.avatar.sm{width:40px;height:40px}
.avatar.lg{width:120px;height:120px}

.overlay[hidden]{display:none}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;padding:16px;z-index:1000}
.overlay.open{display:flex}
.modal{background:#fff;border:1px solid var(--line);border-radius:var(--r);box-shadow:var(--shadow);width:min(700px,100%);display:none}
.modal.open{display:block}
.modal-head{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--line)}
.modal-body{padding:16px}
.modal .btn-close{border:0;background:transparent;font-size:20px;cursor:pointer}
.banner{width:100%;height:140px;object-fit:cover;border:1px solid var(--line);border-radius:12px;background:#f6f7fb}
.uploader.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.label{margin:6px 0;color:#536471}

.fab{position:fixed;right:18px;bottom:18px;width:56px;height:56px;border-radius:50%;border:none;background:var(--primary);color:#fff;font-size:28px;line-height:0;box-shadow:var(--shadow);cursor:pointer;z-index:20}

#toast{position:fixed;left:50%;bottom:24px;transform:translateX(-50%);background:#111;color:#fff;padding:.5rem .9rem;border-radius:999px;opacity:0;transition:.2s;z-index:1200}
#toast.show{opacity:1}

@media (max-width: 1024px){
  .layout{grid-template-columns:0 minmax(0,1fr) 0}
  .leftnav,.rightcol{display:none}
  .search input{width:56vw}
}
