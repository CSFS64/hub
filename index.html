<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MiniForum</title>
  <link rel="stylesheet" href="./style.css" />
  <link rel="icon" href="data:," />
</head>
<body>
  <div id="app">
    <!-- 顶部导航（与 main.js 匹配的 id） -->
    <header class="app-header">
      <div class="brand">MiniForum</div>
      <div class="search">
        <input id="searchInput" placeholder="搜索内容、用户…" />
      </div>
      <div class="user-entry" id="user-entry">
        <!-- main.js 会渲染：发帖按钮 + 头像 -->
      </div>
    </header>

    <main class="app-main">
      <!-- 左侧导航：和 main.js 的路由按钮对齐 -->
      <nav class="sidebar">
        <button class="nav-item" id="nav-home">首页</button>
        <button class="nav-item" data-route="#/home?tab=following" id="nav-following">关注</button>
        <button class="nav-item" id="btn-compose">发布</button>
        <button class="nav-item" id="nav-me">我的主页</button>
        <button class="nav-item" data-route="#/settings">设置</button>
      </nav>

      <!-- 主内容（首页 Feed） -->
      <section class="feed" id="feedView">
        <div class="feed-tabs">
          <button class="tab active" id="tab-forYou" data-tab="forYou">推荐</button>
          <button class="tab" id="tab-following" data-tab="following">关注</button>
        </div>
        <div id="feed-list"></div>
        <div class="feed-more">
          <button class="btn ghost" id="btnLoadMore">加载更多</button>
        </div>
      </section>

      <!-- 右侧推荐栏（装饰） -->
      <aside class="aside">
        <div class="card">
          <div class="card-title">可能感兴趣的人</div>
          <div id="suggestions"></div>
        </div>
        <div class="card">
          <div class="card-title">热门话题</div>
          <div class="chips">
            <span class="chip">#前端</span>
            <span class="chip">#Cloudflare</span>
            <span class="chip">#设计</span>
          </div>
        </div>
      </aside>
    </main>

    <!-- 个人主页视图（main.js 会动态渲染到 #feed-list；保留此区块可选） -->
    <section class="profile" id="profileView" hidden></section>

    <!-- 页脚 -->
    <footer class="app-footer">
      <div>© MiniForum · <a href="#">隐私</a> · <a href="#">条款</a></div>
    </footer>

    <!-- 全局遮罩 & 弹层容器（必须，main.js 依赖） -->
    <div class="overlay" id="overlay" hidden>
      <!-- 发帖弹层 -->
      <div class="modal" id="modal-compose">
        <div class="modal-head">
          <div class="title">发布内容</div>
          <button class="btn-close" aria-label="关闭">×</button>
        </div>
        <form id="compose-form" class="modal-body">
          <textarea id="compose-content" rows="4" maxlength="5000" placeholder="写点什么吧…"></textarea>
          <div class="uploader">
            <label class="btn ghost">
              <input id="compose-images" type="file" accept="image/*" multiple hidden />
              选择图片（最多 3 张）
            </label>
            <button type="button" class="btn" id="compose-clear-images">清空图片</button>
          </div>
          <div id="compose-previews" class="media-grid"></div>
          <div class="modal-actions">
            <button type="button" class="btn btn-close">取消</button>
            <button type="submit" class="btn primary">发布</button>
          </div>
        </form>
      </div>

      <!-- 编辑资料弹层 -->
      <div class="modal" id="modal-edit">
        <div class="modal-head">
          <div class="title">编辑资料</div>
          <button class="btn-close" aria-label="关闭">×</button>
        </div>
        <form id="edit-form" class="modal-body">
          <label>昵称 <input id="edit-nick" maxlength="24" /></label>
          <label>简介 <textarea id="edit-bio" rows="3" maxlength="200"></textarea></label>
          <div class="uploader">
            <div>
              <div>头像</div>
              <img id="edit-avatar-preview" class="avatar lg" alt="avatar" />
              <input id="edit-avatar" type="file" accept="image/*" />
            </div>
            <div>
              <div>封面</div>
              <img id="edit-cover-preview" class="banner" alt="cover" />
              <input id="edit-cover" type="file" accept="image/*" />
            </div>
          </div>
          <div class="modal-actions">
            <button type="button" class="btn btn-close">取消</button>
            <button type="submit" class="btn primary">保存</button>
          </div>
        </form>
      </div>

      <!-- 图片查看弹层 -->
      <div class="modal" id="modal-image">
        <div class="modal-head">
          <div class="title">预览</div>
          <button class="btn-close" aria-label="关闭">×</button>
        </div>
        <div class="modal-body">
          <img class="img-view" alt="preview" />
        </div>
      </div>
    </div>

    <!-- Toast -->
    <div id="toast"></div>

    <!-- 浮动发布按钮（移动端） -->
    <button class="fab" id="fabCompose" title="发布">＋</button>
  </div>

  <!-- 你的后端域名由 main.js 内部常量 API_BASE 决定，这里无需再设置 window.API_BASE -->
  <script type="module" src="./main.js"></script>
</body>
</html>
