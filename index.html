<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MiniForum</title>
  <link rel="icon" href="data:," />
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div id="app">
    <!-- 顶部导航 -->
    <header class="topbar">
      <div class="topbar-inner">
        <div class="brand">MiniForum</div>
        <div class="search">
          <input id="searchInput" placeholder="搜索内容、用户…" />
        </div>
        <div class="user-entry" id="user-entry"></div>
      </div>
    </header>

    <main class="layout">
      <!-- 左侧导航 -->
      <aside class="leftnav">
        <button class="nav-btn" id="nav-home">🏠 首页</button>
        <button class="nav-btn" id="nav-following">👥 关注</button>
        <button class="nav-btn" id="btn-compose">✍️ 发布</button>
        <button class="nav-btn" id="nav-me">🙋 我的主页</button>
        <button class="nav-btn" disabled>⚙️ 设置</button>
      </aside>

      <!-- 中栏：时间线 -->
      <section class="center">
        <div class="tabs">
          <button class="tab active" id="tab-forYou" data-tab="forYou">推荐</button>
          <button class="tab" id="tab-following" data-tab="following">关注</button>
        </div>

        <!-- 置顶发布框（推特式） -->
        <div class="composer card">
          <img class="avatar sm" id="composerAvatar" alt="me" />
          <div class="composer-body">
            <textarea id="composerText" rows="3" maxlength="5000" placeholder="有什么新鲜事？"></textarea>
            <div class="composer-tools">
              <label class="btn ghost">
                <input id="composerImageInput" type="file" accept="image/*" multiple hidden />
                添加图片
              </label>
              <div class="spacer"></div>
              <button class="btn" id="btnClearDraft">清空</button>
              <button class="btn primary" id="btnPost">发布</button>
            </div>
            <div id="composerPreview" class="media-grid"></div>
          </div>
        </div>

        <div id="feed-list"></div>
        <div class="loadmore">
          <button class="btn ghost" id="btnLoadMore">加载更多</button>
        </div>
      </section>

      <!-- 右侧探索 -->
      <aside class="rightcol">
        <div class="card">
          <div class="card-title">可能感兴趣的人</div>
          <div id="suggestions"></div>
        </div>
        <div class="card">
          <div class="card-title">热门话题</div>
          <div class="chips">
            <span class="chip">#前端</span>
            <span class="chip">#Cloudflare</span>
            <span class="chip">#设计</span>
          </div>
        </div>
      </aside>
    </main>

    <footer class="footer">© MiniForum · <a href="#">隐私</a> · <a href="#">条款</a></footer>

    <!-- 通用遮罩/弹层 -->
    <div class="overlay" id="overlay" hidden>
      <!-- 发帖弹层 -->
      <div class="modal" id="modal-compose">
        <div class="modal-head">
          <div class="title">发布内容</div>
          <button class="btn-close" aria-label="关闭">×</button>
        </div>
        <form id="compose-form" class="modal-body">
          <textarea id="compose-content" rows="4" maxlength="5000" placeholder="写点什么吧…"></textarea>
          <div class="uploader">
            <label class="btn ghost">
              <input id="compose-images" type="file" accept="image/*" multiple hidden />
              选择图片（最多 3 张）
            </label>
            <button type="button" class="btn" id="compose-clear-images">清空图片</button>
          </div>
          <div id="compose-previews" class="media-grid"></div>
          <div class="modal-actions">
            <button type="button" class="btn btn-close">取消</button>
            <button type="submit" class="btn primary">发布</button>
          </div>
        </form>
      </div>

      <!-- 编辑资料 -->
      <div class="modal" id="modal-edit">
        <div class="modal-head">
          <div class="title">编辑资料</div>
          <button class="btn-close" aria-label="关闭">×</button>
        </div>
        <form id="edit-form" class="modal-body">
          <label>昵称 <input id="edit-nick" maxlength="24" /></label>
          <label>简介 <textarea id="edit-bio" rows="3" maxlength="200"></textarea></label>
          <div class="uploader grid2">
            <div>
              <div class="label">头像</div>
              <img id="edit-avatar-preview" class="avatar lg" alt="avatar" />
              <input id="edit-avatar" type="file" accept="image/*" />
            </div>
            <div>
              <div class="label">封面</div>
              <img id="edit-cover-preview" class="banner" alt="cover" />
              <input id="edit-cover" type="file" accept="image/*" />
            </div>
          </div>
          <div class="modal-actions">
            <button type="button" class="btn btn-close">取消</button>
            <button type="submit" class="btn primary">保存</button>
          </div>
        </form>
      </div>

      <!-- 大图预览 -->
      <div class="modal" id="modal-image">
        <div class="modal-head">
          <div class="title">预览</div>
          <button class="btn-close" aria-label="关闭">×</button>
        </div>
        <div class="modal-body">
          <img class="img-view" alt="preview" />
        </div>
      </div>
    </div>

    <!-- Toast -->
    <div id="toast"></div>

    <!-- 移动端悬浮发布 -->
    <button class="fab" id="fabCompose" title="发布">＋</button>
  </div>

  <script type="module" src="./main.js"></script>
</body>
</html>
